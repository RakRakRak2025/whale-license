<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>울산 고래면허증 - 나만의 특별한 고래면허증을 발급받으세요!</title>

<!-- ───── SEO · OG 메타 ───── -->
<meta name="description" content="울산의 명물 고래면허증을 디지털로! 지금 바로 발급받고 고래패스 혜택도 받아보세요. 무료 발급, 즉시 다운로드 가능">
<meta name="keywords" content="울산, 고래면허증, 울산고래, 고래패스, 울산관광, 고래축제, 디지털면허증">
<meta property="og:type" content="website">
<meta property="og:title" content="🐋 울산 고래면허증 - 지금 바로 발급받으세요!">
<meta property="og:description" content="나만의 특별한 고래면허증을 만들고, 고래패스 혜택도 받아가세요! 선착순 이벤트 진행중">
<meta property="og:image" content="https://via.placeholder.com/1200x630/667eea/ffffff?text=울산+고래면허증">
<meta property="og:url" content="https://rakrakrak2025.github.io/whale-license/">
<meta property="og:site_name" content="울산 고래면허증">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><text y='.9em' font-size='90'>🐋</text></svg>">

<style>
/* reset */
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Pretendard',-apple-system,BlinkMacSystemFont,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px;display:flex;align-items:center;justify-content:center}
.main-container{width:100%;max-width:1200px;display:flex;gap:30px;align-items:start}

/* 입력 폼 */
.form-section{flex:1;background:#fff;border-radius:20px;padding:30px;box-shadow:0 20px 40px rgba(0,0,0,.1)}
.form-header{text-align:center;margin-bottom:30px}
.form-header h1{color:#333;font-size:24px;margin-bottom:10px}
.form-header .whale-emoji{font-size:50px;margin-bottom:10px;animation:bounce 2s ease-in-out infinite}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.form-group{margin-bottom:20px}
label{display:block;font-weight:600;color:#555;margin-bottom:8px;font-size:14px}
input,select{width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:10px;font-size:16px;transition:.3s}
input:focus,select:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,.1)}

/* 아바타 */
.avatar-selection{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;justify-items:center;margin-top:10px}
.avatar-option{width:60px;height:60px;border:3px solid #e0e0e0;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:30px;cursor:pointer;transition:.3s;background:#f5f5f5}
.avatar-option:hover{transform:scale(1.1);border-color:#667eea}
.avatar-option.selected{border-color:#667eea;background:#e6e9ff;box-shadow:0 0 0 3px rgba(102,126,234,.2)}

/* 면허증 */
.license-section{flex:1;perspective:1000px}
.license-card{background:#fff;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.2);overflow:hidden;transform:rotateY(-5deg);transition:.3s;margin:0 auto;max-width:400px}
.license-card:hover{transform:rotateY(0)}
.license-header{background:linear-gradient(135deg,#1e3c72 0%,#2a5298 100%);color:#fff;padding:25px;text-align:center;position:relative;overflow:hidden}
.license-header::before{content:'';position:absolute;inset:0;background:linear-gradient(105deg,transparent 40%,rgba(255,255,255,.1) 50%,transparent 60%);animation:shimmer 3s infinite}
.license-header::after{content:'';position:absolute;inset:0;background-image:radial-gradient(circle at 50% 50%,transparent 30%,rgba(255,255,255,.02) 70%,transparent 71%);background-size:30px 30px;opacity:.5}
@keyframes shimmer{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}
.license-logo{font-size:40px;margin-bottom:10px;position:relative;z-index:1;filter:drop-shadow(0 0 10px rgba(255,255,255,.5));animation:float 3s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-5px)}}
.license-title{font-size:24px;font-weight:700;margin-bottom:8px;position:relative;z-index:1;text-shadow:0 0 20px rgba(255,255,255,.5),0 2px 4px rgba(0,0,0,.3);letter-spacing:1px}
.license-subtitle{font-size:13px;opacity:.95;position:relative;z-index:1;letter-spacing:3px;font-weight:500;text-transform:uppercase;text-shadow:0 1px 2px rgba(0,0,0,.2)}

.license-body{padding:30px;position:relative}
.license-info{display:flex;gap:25px;margin-bottom:25px}
.avatar-display{width:100px;height:100px;background:#f0f0f0;border-radius:15px;display:flex;align-items:center;justify-content:center;font-size:60px;box-shadow:0 4px 15px rgba(0,0,0,.1);position:relative;overflow:hidden}
.avatar-display::after{content:'ULSAN';position:absolute;bottom:5px;right:5px;font-size:10px;background:rgba(255,255,255,.9);padding:2px 6px;border-radius:4px;color:#2a5298;font-weight:600}
.info-details{flex:1}
.info-row{display:flex;align-items:baseline;margin-bottom:12px}
.info-label{font-size:12px;color:#666;min-width:70px;font-weight:500}
.info-value{font-size:16px;color:#222;font-weight:600;flex:1}
.info-value.name{font-size:20px;color:#1e3c72;font-weight:700}

.additional-info{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;padding:20px 0;border-top:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0}
.info-item{text-align:center;background:#f8f9fa;padding:12px;border-radius:10px}
.info-item-label{font-size:11px;color:#666;margin-bottom:5px}
.info-item-value{font-size:14px;font-weight:700;color:#2a5298}

.license-number{text-align:center;margin-top:20px;font-size:18px;font-family:'Courier New',monospace;letter-spacing:2px;color:#1e3c72;font-weight:700}
#barcodeSvg{display:block;margin:15px auto}

/* 홀로그램 효과 */
.hologram{position:absolute;bottom:20px;left:20px;width:60px;height:60px;background:linear-gradient(135deg,rgba(255,255,255,.15),rgba(255,255,255,.05));border-radius:50%;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);display:flex;align-items:center;justify-content:center;box-shadow:0 8px 32px rgba(31,38,135,.15),inset 0 0 20px rgba(255,255,255,.1)}
.hologram::before{content:'🐋';font-size:30px;opacity:.8;filter:drop-shadow(0 0 3px rgba(255,255,255,.5))}

.download-section{text-align:center;margin-top:20px}
.btn-download{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:15px 40px;border:none;border-radius:30px;font-size:16px;font-weight:600;cursor:pointer;transition:.3s;box-shadow:0 4px 15px rgba(102,126,234,.3)}
.btn-download:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,.4)}
.btn-download:active{transform:translateY(0)}

/* 플로팅 & 관리자 */
.floating-buttons{position:fixed;bottom:20px;right:20px;display:flex;flex-direction:column;gap:10px;z-index:1000}
.float-btn{width:60px;height:60px;border-radius:50%;border:none;font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px rgba(0,0,0,.2);transition:.3s}
.float-btn:hover{transform:scale(1.1)}
.float-btn.coupon{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);color:#fff}
.float-btn.share{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);color:#fff}
.float-btn.admin{background:#2c3e50;color:#fff;font-size:20px}

.admin-panel{display:none;position:fixed;top:0;right:0;width:320px;height:100vh;background:#fff;box-shadow:-5px 0 20px rgba(0,0,0,.1);z-index:1100;overflow-y:auto;animation:slideIn .3s ease-out}
@keyframes slideIn{from{transform:translateX(100%)}to{transform:translateX(0)}}
.admin-header{background:#2c3e50;color:#fff;padding:20px;display:flex;justify-content:space-between;align-items:center}
.admin-header h3{margin:0;font-size:18px;font-weight:700}
.admin-header button{background:none;border:none;color:#fff;font-size:24px;cursor:pointer}
.admin-content{padding:20px}
.stat-card{background:#f8f9fa;padding:20px;border-radius:10px;margin-bottom:15px}
.stat-label{font-size:14px;color:#666;margin-bottom:5px}
.stat-value{font-size:32px;font-weight:700;color:#2a5298}
.admin-btn{width:100%;padding:12px;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:.3s;margin-bottom:10px}
.admin-btn.danger{background:#dc3545;color:#fff}
.admin-btn.danger:hover{background:#c82333}
.admin-btn.success{background:#28a745;color:#fff}
.admin-btn.success:hover{background:#218838}

/* 반응형 */
@media(max-width:768px){
  .main-container{flex-direction:column}
  .avatar-selection{grid-template-columns:repeat(4,1fr)}
  .license-card{transform:none}
}
</style>

<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>
<div class="main-container">
  <div class="form-section">
    <div class="form-header">
      <div class="whale-emoji">🐋</div>
      <h1>울산 고래면허증 즉시발급</h1>
      <p style="color:#666;">정보를 입력하면 실시간으로 면허증이 생성됩니다</p>
    </div>

    <div class="form-group">
      <label for="name">이름</label>
      <input type="text" id="name" placeholder="홍길동" oninput="updateLicense()">
    </div>
    <div class="form-group">
      <label for="birthdate">생년월일</label>
      <input type="date" id="birthdate" onchange="updateLicense()">
    </div>
    <div class="form-group">
      <label for="whaleType">고래 종류</label>
      <select id="whaleType" onchange="updateLicense()">
        <option value="">선택하세요</option>
        <option value="귀신고래">귀신고래</option>
        <option value="혹등고래">혹등고래</option>
        <option value="밍크고래">밍크고래</option>
        <option value="범고래">범고래</option>
        <option value="대왕고래">대왕고래</option>
      </select>
    </div>
    <div class="form-group">
      <label for="experience">고래 운전 목적</label>
      <select id="experience" onchange="updateLicense()">
        <option value="">선택하세요</option>
        <option value="출퇴근용">출퇴근용 🏢</option>
        <option value="폭주용">폭주용 🏁</option>
        <option value="데이트용">데이트용 💕</option>
        <option value="관광용">관광용 📸</option>
        <option value="배달용">배달용 🛵</option>
        <option value="주차전문">주차전문 🅿️</option>
        <option value="초보운전">초보운전 🔰</option>
        <option value="프로레이서">프로레이서 🏆</option>
        <option value="일요일운전">일요일운전 😴</option>
        <option value="바다횡단">바다횡단 🌊</option>
      </select>
    </div>

    <div class="form-group">
      <label>고래 프로필 선택</label>
      <div class="avatar-selection">
        <div class="avatar-option selected" onclick="selectAvatar('🐋',this)">🐋</div>
        <div class="avatar-option" onclick="selectAvatar('🐳',this)">🐳</div>
        <div class="avatar-option" onclick="selectAvatar('🐬',this)">🐬</div>
        <div class="avatar-option" onclick="selectAvatar('🦈',this)">🦈</div>
        <div class="avatar-option" onclick="selectAvatar('🌊',this)">🌊</div>
        <div class="avatar-option" onclick="selectAvatar('💙',this)">💙</div>
        <div class="avatar-option" onclick="selectAvatar('✨',this)">✨</div>
        <div class="avatar-option" onclick="selectAvatar('🌙',this)">🌙</div>
        <div class="avatar-option" onclick="selectAvatar('🔥',this)">🔥</div>
        <div class="avatar-option" onclick="selectAvatar('🏁',this)">🏁</div>
        <div class="avatar-option" onclick="selectAvatar('🎸',this)">🎸</div>
        <div class="avatar-option" onclick="selectAvatar('🚀',this)">🚀</div>
      </div>
    </div>
  </div>

  <div class="license-section">
    <div class="license-card">
      <div class="license-header">
        <div class="license-logo">🐋</div>
        <div class="license-title">울산광역시 고래면허증</div>
        <div class="license-subtitle">ULSAN WHALE LICENSE</div>
      </div>

      <div class="license-body">
        <div class="license-info">
          <div class="avatar-display" id="avatarDisplay">🐋</div>
          <div class="info-details">
            <div class="info-row"><span class="info-label">성명</span><span class="info-value name" id="displayName">-</span></div>
            <div class="info-row"><span class="info-label">생년월일</span><span class="info-value" id="displayBirth">-</span></div>
            <div class="info-row"><span class="info-label">고래종류</span><span class="info-value" id="displayWhale">-</span></div>
            <div class="info-row"><span class="info-label">운전목적</span><span class="info-value" id="displayGrade">-</span></div>
          </div>
        </div>

        <div class="additional-info">
          <div class="info-item"><div class="info-item-label">발급일자</div><div class="info-item-value" id="issueDate">-</div></div>
          <div class="info-item"><div class="info-item-label">유효기간</div><div class="info-item-value" id="expiryDate">-</div></div>
          <div class="info-item"><div class="info-item-label">발급기관</div><div class="info-item-value">울산광역시</div></div>
          <div class="info-item"><div class="info-item-label">용도</div><div class="info-item-value">고래 관찰</div></div>
        </div>

        <div class="license-number" id="licenseNumber">UW-2024-000000</div>
        <svg id="barcodeSvg"></svg>
        <div class="hologram"></div>
      </div>
    </div>

    <div class="download-section">
      <button class="btn-download" onclick="downloadLicense()">📥 면허증 다운로드</button>
    </div>
  </div>
</div>

<div class="floating-buttons">
  <button class="float-btn coupon" onclick="showCoupon()">🎁</button>
  <button class="float-btn share" onclick="shareToSNS()">📱</button>
  <button class="float-btn admin" onclick="toggleAdmin()">⚙️</button>
</div>

<div class="admin-panel" id="adminPanel">
  <div class="admin-header">
    <h3>🐋 관리자 모드</h3>
    <button onclick="toggleAdmin()">×</button>
  </div>
  <div class="admin-content">
    <div class="stat-card"><div class="stat-label">오늘 발급 수</div><div class="stat-value" id="todayCount">0</div></div>
    <div class="stat-card"><div class="stat-label">전체 발급 수</div><div class="stat-value" id="totalCount">0</div></div>
    <div class="stat-card"><div class="stat-label">인기 고래</div><div class="stat-value" id="popularWhale">-</div></div>
    <button class="admin-btn danger" onclick="resetStats()">🔄 통계 초기화</button>
    <button class="admin-btn success" onclick="exportStats()">📊 통계 내보내기</button>
  </div>
</div>

<script>
let selectedAvatar = '🐋';
let licenseNum = generateLicenseNumber();
let stats = {
    total: parseInt(localStorage.getItem('totalLicenses') || '0'),
    today: parseInt(localStorage.getItem('todayLicenses') || '0'),
    lastDate: localStorage.getItem('lastDate') || new Date().toDateString()
};

window.addEventListener('DOMContentLoaded', () => {
    updateLicense();
    JsBarcode('#barcodeSvg', licenseNum, {format: 'CODE128', width: 2, height: 40, displayValue: false});
    document.getElementById('issueDate').textContent = formatDate(new Date());
    document.getElementById('expiryDate').textContent = formatDate(getExpiryDate());
    document.getElementById('licenseNumber').textContent = licenseNum;
    checkDate();
    updateStatsDisplay();
});

function selectAvatar(avatar, el) {
    selectedAvatar = avatar;
    document.querySelectorAll('.avatar-option').forEach(o => o.classList.remove('selected'));
    el.classList.add('selected');
    updateLicense();
}

function updateLicense() {
    const name = document.getElementById('name').value.trim() || '-';
    const birth = document.getElementById('birthdate').value;
    const whale = document.getElementById('whaleType').value || '-';
    const exp = document.getElementById('experience').value || '-';
    
    document.getElementById('displayName').textContent = name;
    document.getElementById('displayBirth').textContent = birth ? formatDate(birth) : '-';
    document.getElementById('displayWhale').textContent = whale;
    document.getElementById('displayGrade').textContent = exp.split(' ')[0];
    document.getElementById('avatarDisplay').textContent = selectedAvatar;
}

function generateLicenseNumber() {
    const y = new Date().getFullYear();
    const r = Math.floor(Math.random() * 1e6).toString().padStart(6, '0');
    return `UW-${y}-${r}`;
}

function formatDate(d) {
    const dt = new Date(d);
    const m = String(dt.getMonth() + 1).padStart(2, '0');
    const day = String(dt.getDate()).padStart(2, '0');
    return `${dt.getFullYear()}.${m}.${day}`;
}

function getExpiryDate() {
    const dt = new Date();
    return new Date(dt.getFullYear() + 5, dt.getMonth(), dt.getDate());
}

function checkDate() {
    const today = new Date().toDateString();
    if (stats.lastDate !== today) {
        stats.today = 0;
        stats.lastDate = today;
        localStorage.setItem('todayLicenses', '0');
        localStorage.setItem('lastDate', today);
    }
}

function incrementLicense() {
    checkDate();
    stats.total++;
    stats.today++;
    localStorage.setItem('totalLicenses', stats.total.toString());
    localStorage.setItem('todayLicenses', stats.today.toString());
    updateStatsDisplay();
}

function updateStatsDisplay() {
    const totalElement = document.getElementById('totalCount');
    const todayElement = document.getElementById('todayCount');
    if (totalElement) totalElement.textContent = stats.total;
    if (todayElement) todayElement.textContent = stats.today;
}

function downloadLicense() {
    incrementLicense();
    html2canvas(document.querySelector('.license-card'), {backgroundColor: '#fff', scale: 2, logging: false, useCORS: true}).then(cv => {
        cv.toBlob(b => {
            const u = URL.createObjectURL(b);
            const a = document.createElement('a');
            a.href = u;
            a.download = `울산고래면허증_${document.getElementById('displayName').textContent}_${licenseNum}.png`;
            a.click();
            URL.revokeObjectURL(u);
            alert(`🐋 고래면허증이 저장되었습니다!\n\n발급 완료! 총 ${stats.total}번째 면허증입니다.`);
        });
    });
}

function showCoupon() {
    alert('🎁 고래패스 쿠폰 이벤트 준비 중입니다!\n\n울산 고래면허증을 SNS에 공유하고\n특별 혜택을 받아보세요!');
}

function shareToSNS() {
    const name = document.getElementById('displayName').textContent;
    const whaleType = document.getElementById('displayWhale').textContent;
    const shareText = `🐋 나도 울산 고래면허증 발급 완료!\n성명: ${name}\n고래종류: ${whaleType}\n지금 바로 발급받기 👇`;
    const shareUrl = window.location.href;
    
    if (navigator.share) {
        navigator.share({title: '울산 고래면허증', text: shareText, url: shareUrl}).catch(err => console.log('공유 취소'));
    } else {
        const fullText = `${shareText}\n${shareUrl}`;
        navigator.clipboard.writeText(fullText).then(() => {
            alert('📱 공유 텍스트가 복사되었습니다!\nSNS에 붙여넣기 해주세요.');
        }).catch(() => {
            prompt('다음 텍스트를 복사해서 SNS에 공유해주세요:', fullText);
        });
    }
}

function toggleAdmin() {
    const p = document.getElementById('adminPanel');
    const isVisible = p.style.display === 'block';
    
    if (!isVisible) {
        const password = prompt('관리자 비밀번호를 입력하세요:');
        if (password !== '1633') {
            alert('비밀번호가 틀렸습니다.');
            return;
        }
    }
    
    p.style.display = isVisible ? 'none' : 'block';
    updateStatsDisplay();
}

function resetStats() {
    if (confirm('정말로 모든 통계를 초기화하시겠습니까?')) {
        stats.total = 0;
        stats.today = 0;
        localStorage.setItem('totalLicenses', '0');
        localStorage.setItem('todayLicenses', '0');
        updateStatsDisplay();
        alert('통계가 초기화되었습니다.');
    }
}

function exportStats() {
    const data = `울산 고래면허증 통계\n생성일: ${new Date().toLocaleString()}\n전체 발급: ${stats.total}건\n오늘 발급: ${stats.today}건`;
    const blob = new Blob([data], {type: 'text/plain'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `고래면허증_통계_${new Date().toLocaleDateString()}.txt`;
    a.click();
    URL.revokeObjectURL(url);
}
</script>
</body>
</html>
